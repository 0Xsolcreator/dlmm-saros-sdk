"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,n,r,a,i=require("@solana/web3.js"),o=require("@coral-xyz/anchor"),s=require("@solana/spl-token"),u=require("buffer"),c=e(require("lodash/cloneDeep")),p=e(require("js-big-decimal")),m=require("@coral-xyz/anchor/dist/cjs/utils/bytes");function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){l(i,r,a,o,s,"next",e)}function s(e){l(i,r,a,o,s,"throw",e)}o(void 0)}))}}function _(e,t,n){if(g())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var a=new(e.bind.apply(e,r));return n&&A(a,n.prototype),a}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,A(e,t)}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function v(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var u=Object.create((r&&r.prototype instanceof s?r:s).prototype);return w(u,"_invoke",function(n,r,a){var i,s,u,c=0,p=a||[],m=!1,d={p:0,n:0,v:e,a:l,f:l.bind(e,4),d:function(t,n){return i=t,s=0,u=e,d.n=n,o}};function l(n,r){for(s=n,u=r,t=0;!m&&c&&!a&&t<p.length;t++){var a,i=p[t],l=d.p,y=i[2];n>3?(a=y===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=l&&((a=n<2&&l<i[1])?(s=0,d.v=r,d.n=i[1]):l<y&&(a=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,d.n=y,s=0))}if(a||n>1)return o;throw m=!0,r}return function(a,p,y){if(c>1)throw TypeError("Generator is already running");for(m&&1===p&&l(p,y),s=p,u=y;(t=s<2?e:u)||!m;){i||(s?s<3?(s>1&&(d.n=-1),l(s,u)):d.n=u:d.v=u);try{if(c=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(m=d.n<0)?u:n.call(r,d))!==o)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:m}}}(n,a,i),!0),u}var o={};function s(){}function u(){}function c(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(w(t={},r,(function(){return this})),t),m=c.prototype=s.prototype=Object.create(p);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,w(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=c,w(m,"constructor",c),w(c,"constructor",u),u.displayName="GeneratorFunction",w(c,a,"GeneratorFunction"),w(m),w(m,a,"Generator"),w(m,r,(function(){return this})),w(m,"toString",(function(){return"[object Generator]"})),(v=function(){return{w:i,m:d}})()}function w(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(w=function(e,t,n,r){function i(t,n){w(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))})(e,t,n,r)}function P(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(typeof e+" is not iterable")}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function I(e){var t="function"==typeof Map?new Map:void 0;return(I=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),A(n,e)})(e)}(t=exports.MODE||(exports.MODE={})).TESTNET="testnet",t.DEVNET="devnet",t.MAINNET="mainnet",(n=exports.LiquidityShape||(exports.LiquidityShape={})).Spot="Spot",n.Curve="Curve",n.BidAsk="BidAsk",(r=exports.RemoveLiquidityType||(exports.RemoveLiquidityType={})).Both="removeBoth",r.BaseToken="removeBaseToken",r.QuoteToken="removeQuoteToken";var S=((a={})[exports.MODE.TESTNET]={rpc:"https://api.testnet.solana.com"},a[exports.MODE.DEVNET]={rpc:"https://api.devnet.solana.com"},a[exports.MODE.MAINNET]={rpc:"https://api.mainnet-beta.solana.com"},a),x=Math.floor(1157407.4074074074),M="So11111111111111111111111111111111111111112",E={address:"1qbkdrr3z4ryLA7pZykqxvxWPoeifcVKo6ZG9CfkvVE",metadata:{name:"liquidity_book",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},instructions:[{name:"accept_config_ownership",discriminator:[6,212,14,48,229,38,62,241],accounts:[{name:"liquidity_book_config",writable:!0},{name:"pending_preset_authority",signer:!0},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[]},{name:"close_position",discriminator:[123,134,81,0,49,68,98,98],accounts:[{name:"pair",writable:!0,relations:["position","bin_array_lower","bin_array_upper"]},{name:"position",writable:!0},{name:"position_mint",writable:!0},{name:"position_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"position_token_program"},{kind:"account",path:"position_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"bin_array_lower",writable:!0},{name:"bin_array_upper",writable:!0},{name:"token_mint_x",relations:["pair"]},{name:"token_mint_y",relations:["pair"]},{name:"token_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"token_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user",signer:!0},{name:"token_program_x"},{name:"token_program_y"},{name:"position_token_program",address:"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"memo_program",address:"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"},{name:"hook",writable:!0,optional:!0},{name:"hooks_program",optional:!0},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[]},{name:"create_position",discriminator:[48,215,197,153,96,203,180,133],accounts:[{name:"pair"},{name:"position",writable:!0,pda:{seeds:[{kind:"const",value:[112,111,115,105,116,105,111,110]},{kind:"account",path:"position_mint"}]}},{name:"position_mint",writable:!0,signer:!0},{name:"position_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program"},{kind:"account",path:"position_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"token_program",address:"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"relative_bin_id_left",type:"i32"},{name:"relative_bin_in_right",type:"i32"}]},{name:"decrease_position",discriminator:[57,125,21,59,200,137,179,108],accounts:[{name:"pair",writable:!0,relations:["position","bin_array_lower","bin_array_upper"]},{name:"position",writable:!0},{name:"position_mint",writable:!0},{name:"position_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"position_token_program"},{kind:"account",path:"position_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"bin_array_lower",writable:!0},{name:"bin_array_upper",writable:!0},{name:"token_mint_x",relations:["pair"]},{name:"token_mint_y",relations:["pair"]},{name:"token_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"token_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user",signer:!0},{name:"token_program_x"},{name:"token_program_y"},{name:"position_token_program",address:"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"memo_program",address:"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"},{name:"hook",writable:!0,optional:!0},{name:"hooks_program",optional:!0},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"shares",type:{vec:"u128"}}]},{name:"increase_position",discriminator:[253,234,128,104,192,188,45,91],accounts:[{name:"pair",writable:!0,relations:["position","bin_array_lower","bin_array_upper"]},{name:"position",writable:!0},{name:"position_mint",writable:!0},{name:"position_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"position_token_program"},{kind:"account",path:"position_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"bin_array_lower",writable:!0},{name:"bin_array_upper",writable:!0},{name:"token_mint_x",relations:["pair"]},{name:"token_mint_y",relations:["pair"]},{name:"token_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"token_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user",signer:!0},{name:"token_program_x"},{name:"token_program_y"},{name:"position_token_program",address:"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"memo_program",address:"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"},{name:"hook",writable:!0,optional:!0},{name:"hooks_program",optional:!0},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"amount_x",type:"u64"},{name:"amount_y",type:"u64"},{name:"liquidity_distribution",type:{vec:{defined:{name:"BinLiquidityDistribution"}}}}]},{name:"initialize_bin_array",discriminator:[35,86,19,185,78,212,75,211],accounts:[{name:"pair"},{name:"bin_array",writable:!0,pda:{seeds:[{kind:"const",value:[98,105,110,95,97,114,114,97,121]},{kind:"account",path:"pair"},{kind:"arg",path:"index"}]}},{name:"user",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"id",type:"u32"}]},{name:"initialize_bin_step_config",discriminator:[2,168,136,251,163,9,132,255],accounts:[{name:"liquidity_book_config"},{name:"bin_step_config",writable:!0,pda:{seeds:[{kind:"const",value:[98,105,110,95,115,116,101,112,95,99,111,110,102,105,103]},{kind:"account",path:"liquidity_book_config"},{kind:"arg",path:"bin_step"}]}},{name:"preset_authority",writable:!0,signer:!0,relations:["liquidity_book_config"]},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"bin_step",type:"u8"},{name:"availability",type:{defined:{name:"ConfigAvailability"}}},{name:"fee_parameters",type:{defined:{name:"StaticFeeParameters"}}}]},{name:"initialize_config",discriminator:[208,127,21,1,194,190,196,70],accounts:[{name:"config",writable:!0,signer:!0},{name:"payer",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"fee_authority",type:"pubkey"}]},{name:"initialize_pair",discriminator:[177,114,226,34,186,150,5,245],accounts:[{name:"liquidity_book_config"},{name:"token_mint_x"},{name:"token_mint_y"},{name:"bin_step_config",pda:{seeds:[{kind:"const",value:[98,105,110,95,115,116,101,112,95,99,111,110,102,105,103]},{kind:"account",path:"liquidity_book_config"},{kind:"account",path:"bin_step_config.bin_step",account:"BinStepConfig"}]}},{name:"quote_asset_badge",pda:{seeds:[{kind:"const",value:[113,117,111,116,101,95,97,115,115,101,116,95,98,97,100,103,101]},{kind:"account",path:"liquidity_book_config"},{kind:"account",path:"token_mint_y"}]}},{name:"pair",writable:!0,pda:{seeds:[{kind:"const",value:[112,97,105,114]},{kind:"account",path:"liquidity_book_config"},{kind:"account",path:"token_mint_x"},{kind:"account",path:"token_mint_y"},{kind:"account",path:"bin_step_config.bin_step",account:"BinStepConfig"}]}},{name:"user",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"active_id",type:"u32"}]},{name:"initialize_quote_asset_badge",discriminator:[115,174,34,42,176,5,229,207],accounts:[{name:"liquidity_book_config"},{name:"quote_asset_badge",writable:!0,pda:{seeds:[{kind:"const",value:[113,117,111,116,101,95,97,115,115,101,116,95,98,97,100,103,101]},{kind:"account",path:"liquidity_book_config"},{kind:"account",path:"token_mint"}]}},{name:"token_mint"},{name:"preset_authority",writable:!0,signer:!0,relations:["liquidity_book_config"]},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[]},{name:"set_hook",discriminator:[175,16,187,252,19,54,111,221],accounts:[{name:"liquidity_book_config",relations:["pair"]},{name:"pair",writable:!0},{name:"preset_authority",signer:!0,relations:["liquidity_book_config"]},{name:"hook",writable:!0},{name:"hooks_program"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"swap",discriminator:[248,198,158,145,225,117,135,200],accounts:[{name:"pair",writable:!0,relations:["bin_array_lower","bin_array_upper"]},{name:"token_mint_x",relations:["pair"]},{name:"token_mint_y",relations:["pair"]},{name:"bin_array_lower",writable:!0},{name:"bin_array_upper",writable:!0},{name:"token_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"token_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user",signer:!0},{name:"token_program_x"},{name:"token_program_y"},{name:"memo_program",address:"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"amount",type:"u64"},{name:"other_amount_threshold",type:"u64"},{name:"swap_for_y",type:"bool"},{name:"swap_type",type:{defined:{name:"SwapType"}}}]},{name:"transfer_config_ownership",discriminator:[53,124,67,226,108,130,19,12],accounts:[{name:"liquidity_book_config",writable:!0},{name:"preset_authority",signer:!0,relations:["liquidity_book_config"]},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"new_authority",type:{option:"pubkey"}}]},{name:"update_bin_step_config",discriminator:[205,204,206,220,251,239,19,238],accounts:[{name:"liquidity_book_config",relations:["bin_step_config"]},{name:"bin_step_config",writable:!0},{name:"preset_authority",signer:!0,relations:["liquidity_book_config"]},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"status",type:{defined:{name:"ConfigStatus"}}},{name:"availability",type:{defined:{name:"ConfigAvailability"}}},{name:"fee_parameters",type:{defined:{name:"StaticFeeParameters"}}}]},{name:"update_pair_static_fee_parameters",discriminator:[20,223,186,73,199,65,45,80],accounts:[{name:"liquidity_book_config",relations:["pair"]},{name:"pair",writable:!0},{name:"preset_authority",signer:!0,relations:["liquidity_book_config"]},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"fee_parameters",type:{defined:{name:"StaticFeeParameters"}}}]},{name:"update_quote_asset_badge",discriminator:[42,12,208,17,29,174,196,103],accounts:[{name:"liquidity_book_config"},{name:"quote_asset_badge",writable:!0,pda:{seeds:[{kind:"const",value:[113,117,111,116,101,95,97,115,115,101,116,95,98,97,100,103,101]},{kind:"account",path:"liquidity_book_config"},{kind:"account",path:"token_mint"}]}},{name:"token_mint"},{name:"preset_authority",signer:!0,relations:["liquidity_book_config"]},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"status",type:{defined:{name:"QuoteAssetBadgeStatus"}}}]},{name:"withdraw_protocol_fees",discriminator:[11,68,165,98,18,208,134,73],accounts:[{name:"liquidity_book_config",relations:["pair"]},{name:"pair"},{name:"token_mint_x",relations:["pair"]},{name:"token_mint_y",relations:["pair"]},{name:"token_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"token_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"pair"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"protocol_vault_x",writable:!0,pda:{seeds:[{kind:"account",path:"preset_authority"},{kind:"account",path:"token_program_x"},{kind:"account",path:"pair.token_mint_x",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"protocol_vault_y",writable:!0,pda:{seeds:[{kind:"account",path:"preset_authority"},{kind:"account",path:"token_program_y"},{kind:"account",path:"pair.token_mint_y",account:"Pair"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"token_program_x"},{name:"token_program_y"},{name:"preset_authority",signer:!0,relations:["liquidity_book_config"]},{name:"memo_program",address:"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[]}],accounts:[{name:"BinArray",discriminator:[92,142,92,220,5,148,70,181]},{name:"BinStepConfig",discriminator:[44,12,82,45,127,124,191,199]},{name:"LiquidityBookConfig",discriminator:[173,36,130,129,45,178,44,86]},{name:"Pair",discriminator:[85,72,49,176,182,228,141,82]},{name:"Position",discriminator:[170,188,143,228,122,64,247,208]},{name:"QuoteAssetBadge",discriminator:[183,124,99,219,110,119,157,221]}],types:[{name:"Bin",serialization:"bytemuck",repr:{kind:"c"},type:{kind:"struct",fields:[{name:"total_supply",type:"u128"},{name:"reserve_x",type:"u64"},{name:"reserve_y",type:"u64"}]}},{name:"BinArray",serialization:"bytemuck",repr:{kind:"c"},type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"bins",type:{array:[{defined:{name:"Bin"}},256]}},{name:"index",type:"u32"},{name:"_space",type:{array:["u8",12]}}]}},{name:"BinArrayInitializationEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"index",type:"u32"}]}},{name:"BinLiquidityDistribution",type:{kind:"struct",fields:[{name:"relative_bin_id",type:"i32"},{name:"distribution_x",type:"u16"},{name:"distribution_y",type:"u16"}]}},{name:"BinStepConfig",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"liquidity_book_config",type:"pubkey"},{name:"bin_step",type:"u8"},{name:"status",type:{defined:{name:"ConfigStatus"}}},{name:"availability",type:{defined:{name:"ConfigAvailability"}}},{name:"fee_parameters",type:{defined:{name:"StaticFeeParameters"}}}]}},{name:"BinStepConfigInitializationEvent",type:{kind:"struct",fields:[{name:"liquidity_book_config",type:"pubkey"},{name:"bin_step_config",type:"pubkey"},{name:"bin_step",type:"u8"},{name:"fee_parameters",type:{defined:{name:"StaticFeeParameters"}}}]}},{name:"BinStepConfigUpdateEvent",type:{kind:"struct",fields:[{name:"bin_step_config",type:"pubkey"},{name:"status",type:{defined:{name:"ConfigStatus"}}},{name:"availability",type:{defined:{name:"ConfigAvailability"}}},{name:"fee_parameters",type:{defined:{name:"StaticFeeParameters"}}}]}},{name:"BinSwapEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"swap_for_y",type:"bool"},{name:"protocol_fee",type:"u64"},{name:"bin_id",type:"u32"},{name:"amount_in",type:"u64"},{name:"amount_out",type:"u64"},{name:"volatility_accumulator",type:"u32"},{name:"fee",type:"u64"}]}},{name:"CompositionFeesEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"active_id",type:"u32"},{name:"composition_fees_x",type:"u64"},{name:"composition_fees_y",type:"u64"},{name:"protocol_fees_x",type:"u64"},{name:"protocol_fees_y",type:"u64"}]}},{name:"ConfigAvailability",type:{kind:"enum",variants:[{name:"Closed"},{name:"Open"}]}},{name:"ConfigStatus",type:{kind:"enum",variants:[{name:"Inactive"},{name:"Active"}]}},{name:"DynamicFeeParameters",type:{kind:"struct",fields:[{name:"time_last_updated",type:"u64"},{name:"volatility_accumulator",type:"u32"},{name:"volatility_reference",type:"u32"},{name:"id_reference",type:"u32"},{name:"_space",type:{array:["u8",4]}}]}},{name:"LiquidityBookConfig",type:{kind:"struct",fields:[{name:"preset_authority",type:"pubkey"},{name:"pending_preset_authority",type:{option:"pubkey"}}]}},{name:"LiquidityBookConfigInitializationEvent",type:{kind:"struct",fields:[{name:"config",type:"pubkey"},{name:"preset_authority",type:"pubkey"}]}},{name:"LiquidityBookConfigTransferOwnershipEvent",type:{kind:"struct",fields:[{name:"new_authority",type:"pubkey"}]}},{name:"LiquidityBookConfigTransferOwnershipInitEvent",type:{kind:"struct",fields:[{name:"new_pending_authority",type:{option:"pubkey"}}]}},{name:"Pair",type:{kind:"struct",fields:[{name:"bump",type:{array:["u8",1]}},{name:"liquidity_book_config",type:"pubkey"},{name:"bin_step",type:"u8"},{name:"bin_step_seed",type:{array:["u8",1]}},{name:"token_mint_x",type:"pubkey"},{name:"token_mint_y",type:"pubkey"},{name:"static_fee_parameters",type:{defined:{name:"StaticFeeParameters"}}},{name:"active_id",type:"u32"},{name:"dynamic_fee_parameters",type:{defined:{name:"DynamicFeeParameters"}}},{name:"protocol_fees_x",type:"u64"},{name:"protocol_fees_y",type:"u64"},{name:"hook",type:{option:"pubkey"}}]}},{name:"PairInitializationEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"token_mint_x",type:"pubkey"},{name:"token_mint_y",type:"pubkey"},{name:"bin_step_config",type:"pubkey"},{name:"active_id",type:"u32"}]}},{name:"PairStaticFeeParametersUpdateEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"fee_parameters",type:{defined:{name:"StaticFeeParameters"}}}]}},{name:"Position",serialization:"bytemuck",repr:{kind:"c"},type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"position_mint",type:"pubkey"},{name:"liquidity_shares",type:{array:["u128",64]}},{name:"lower_bin_id",type:"u32"},{name:"upper_bin_id",type:"u32"},{name:"_space",type:{array:["u8",8]}}]}},{name:"PositionCreationEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"position",type:"pubkey"},{name:"position_mint",type:"pubkey"},{name:"lower_bin_id",type:"u32"},{name:"upper_bin_id",type:"u32"}]}},{name:"PositionDecreaseEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"position",type:"pubkey"},{name:"bin_ids",type:{vec:"u32"}},{name:"amounts_x",type:{vec:"u64"}},{name:"amounts_y",type:{vec:"u64"}},{name:"liquidity_burned",type:{vec:"u128"}}]}},{name:"PositionIncreaseEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"position",type:"pubkey"},{name:"bin_ids",type:{vec:"u32"}},{name:"amounts_x",type:{vec:"u64"}},{name:"amounts_y",type:{vec:"u64"}},{name:"liquidity_minted",type:{vec:"u128"}}]}},{name:"ProtocolFeesCollectionEvent",type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"protocol_fees_x",type:"u64"},{name:"protocol_fees_y",type:"u64"}]}},{name:"QuoteAssetBadge",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"status",type:{defined:{name:"QuoteAssetBadgeStatus"}}}]}},{name:"QuoteAssetBadgeInitializationEvent",type:{kind:"struct",fields:[{name:"liquidity_book_config",type:"pubkey"},{name:"quote_asset_badge",type:"pubkey"},{name:"token_mint",type:"pubkey"}]}},{name:"QuoteAssetBadgeStatus",type:{kind:"enum",variants:[{name:"Disabled"},{name:"Enabled"}]}},{name:"QuoteAssetBadgeUpdateEvent",type:{kind:"struct",fields:[{name:"quote_asset_badge",type:"pubkey"},{name:"status",type:{defined:{name:"QuoteAssetBadgeStatus"}}}]}},{name:"StaticFeeParameters",type:{kind:"struct",fields:[{name:"base_factor",type:"u16"},{name:"filter_period",type:"u16"},{name:"decay_period",type:"u16"},{name:"reduction_factor",type:"u16"},{name:"variable_fee_control",type:"u32"},{name:"max_volatility_accumulator",type:"u32"},{name:"protocol_share",type:"u16"},{name:"_space",type:{array:["u8",2]}}]}},{name:"SwapType",type:{kind:"enum",variants:[{name:"ExactInput"},{name:"ExactOutput"}]}}]},F={address:"mdmavMvJpF4ZcLJNg6VSjuKVMiBo5uKwERTg1ZB9yUH",metadata:{name:"mdma_hook",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},instructions:[{name:"before_burn",discriminator:[7,177,19,160,28,229,57,73],accounts:[{name:"hook",writable:!0,relations:["active_bin_hook_bin_array_lower","active_bin_hook_bin_array_upper","position_hook_bin_array_lower","position_hook_bin_array_upper"]},{name:"position"},{name:"pair",signer:!0,relations:["hook","active_bin_array_lower","active_bin_array_upper"]},{name:"pair_account"},{name:"active_bin_array_lower"},{name:"active_bin_array_upper"},{name:"active_bin_hook_bin_array_lower",writable:!0},{name:"active_bin_hook_bin_array_upper",writable:!0},{name:"hook_position",writable:!0,pda:{seeds:[{kind:"const",value:[112,111,115,105,116,105,111,110]},{kind:"account",path:"hook"},{kind:"account",path:"position"}]}},{name:"position_hook_bin_array_lower",writable:!0},{name:"position_hook_bin_array_upper",writable:!0}],args:[]},{name:"before_mint",discriminator:[67,27,57,7,28,168,109,153],accounts:[{name:"hook",writable:!0,relations:["active_bin_hook_bin_array_lower","active_bin_hook_bin_array_upper","position_hook_bin_array_lower","position_hook_bin_array_upper"]},{name:"position"},{name:"pair",signer:!0,relations:["hook","active_bin_array_lower","active_bin_array_upper"]},{name:"pair_account"},{name:"active_bin_array_lower"},{name:"active_bin_array_upper"},{name:"active_bin_hook_bin_array_lower",writable:!0},{name:"active_bin_hook_bin_array_upper",writable:!0},{name:"hook_position",writable:!0,pda:{seeds:[{kind:"const",value:[112,111,115,105,116,105,111,110]},{kind:"account",path:"hook"},{kind:"account",path:"position"}]}},{name:"position_hook_bin_array_lower",writable:!0},{name:"position_hook_bin_array_upper",writable:!0}],args:[]},{name:"before_swap",discriminator:[227,59,240,68,164,9,29,254],accounts:[{name:"hook",writable:!0,relations:["active_bin_hook_bin_array_lower","active_bin_hook_bin_array_upper"]},{name:"position"},{name:"pair",signer:!0,relations:["hook","active_bin_array_lower","active_bin_array_upper"]},{name:"pair_account"},{name:"active_bin_array_lower"},{name:"active_bin_array_upper"},{name:"active_bin_hook_bin_array_lower",writable:!0},{name:"active_bin_hook_bin_array_upper",writable:!0}],args:[]},{name:"claim",discriminator:[62,198,214,193,213,159,108,210],accounts:[{name:"hook",writable:!0,relations:["active_bin_hook_bin_array_lower","active_bin_hook_bin_array_upper","position_hook_bin_array_lower","position_hook_bin_array_upper"]},{name:"position"},{name:"pair",relations:["hook","active_bin_array_lower","active_bin_array_upper"]},{name:"active_bin_array_lower",writable:!0},{name:"active_bin_array_upper",writable:!0},{name:"active_bin_hook_bin_array_lower",writable:!0},{name:"active_bin_hook_bin_array_upper",writable:!0},{name:"hook_position",writable:!0,pda:{seeds:[{kind:"const",value:[112,111,115,105,116,105,111,110]},{kind:"account",path:"hook"},{kind:"account",path:"position"}]}},{name:"position_hook_bin_array_lower",writable:!0},{name:"position_hook_bin_array_upper",writable:!0},{name:"reward_token_mint"},{name:"reward_token_vault",writable:!0,pda:{seeds:[{kind:"account",path:"hook"},{kind:"account",path:"reward_token_program"},{kind:"account",path:"reward_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"reward_token_vault_user",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"reward_token_program"},{kind:"account",path:"reward_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"reward_token_program"},{name:"user",signer:!0},{name:"memo_program",address:"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"}],args:[]},{name:"initialize_bin_array",discriminator:[35,86,19,185,78,212,75,211],accounts:[{name:"hook"},{name:"bin_array",writable:!0,pda:{seeds:[{kind:"const",value:[98,105,110,95,97,114,114,97,121]},{kind:"account",path:"hook"},{kind:"arg",path:"index"}]}},{name:"user",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"index",type:"u32"}]},{name:"initialize_config",discriminator:[208,127,21,1,194,190,196,70],accounts:[{name:"config",writable:!0,signer:!0},{name:"payer",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"liquidity_book_program",type:"pubkey"},{name:"preset_authority",type:"pubkey"}]},{name:"initialize_hook",discriminator:[37,101,119,255,156,39,252,232],accounts:[{name:"config"},{name:"hook",writable:!0,pda:{seeds:[{kind:"const",value:[104,111,111,107]},{kind:"account",path:"config"},{kind:"arg",path:"pair"}]}},{name:"reward_token_mint"},{name:"reward_token_vault",writable:!0,pda:{seeds:[{kind:"account",path:"hook"},{kind:"account",path:"reward_token_program"},{kind:"account",path:"reward_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"reward_token_vault_authority",writable:!0,pda:{seeds:[{kind:"account",path:"hooks_authority"},{kind:"account",path:"reward_token_program"},{kind:"account",path:"reward_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"reward_token_program"},{name:"hooks_authority",writable:!0,signer:!0,relations:["config"]},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"lb_pair",type:"pubkey"},{name:"rewards_per_second",type:"u64"},{name:"start_time",type:"i64"},{name:"duration",type:"i64"}]},{name:"initialize_position",discriminator:[219,192,234,71,190,191,102,80],accounts:[{name:"hook"},{name:"lb_position"},{name:"position",writable:!0,pda:{seeds:[{kind:"const",value:[112,111,115,105,116,105,111,110]},{kind:"account",path:"hook"},{kind:"account",path:"lb_position"}]}},{name:"user",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[]},{name:"on_hook_set",discriminator:[23,126,214,186,197,123,0,235],accounts:[{name:"hook",writable:!0},{name:"pair",signer:!0,relations:["hook"]}],args:[]},{name:"set_rewards_parameters",discriminator:[86,145,230,205,136,137,140,193],accounts:[{name:"config"},{name:"hook",writable:!0,relations:["active_bin_hook_bin_array_lower","active_bin_hook_bin_array_upper"]},{name:"pair",relations:["hook","active_bin_array_lower","active_bin_array_upper"]},{name:"active_bin_array_lower"},{name:"active_bin_array_upper"},{name:"active_bin_hook_bin_array_lower",writable:!0},{name:"active_bin_hook_bin_array_upper",writable:!0},{name:"reward_token_mint",relations:["hook"]},{name:"reward_token_vault",writable:!0,pda:{seeds:[{kind:"account",path:"hook"},{kind:"account",path:"reward_token_program"},{kind:"account",path:"reward_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"reward_token_program"},{name:"hooks_authority",signer:!0,relations:["config"]},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"rewards_per_second",type:"u64"},{name:"start_time",type:"i64"},{name:"duration",type:"i64"}]},{name:"set_rewards_per_second",discriminator:[77,81,53,27,248,29,133,203],accounts:[{name:"config"},{name:"hook",writable:!0,relations:["active_bin_hook_bin_array_lower","active_bin_hook_bin_array_upper"]},{name:"pair",relations:["hook","active_bin_array_lower","active_bin_array_upper"]},{name:"active_bin_array_lower"},{name:"active_bin_array_upper"},{name:"active_bin_hook_bin_array_lower",writable:!0},{name:"active_bin_hook_bin_array_upper",writable:!0},{name:"reward_token_mint",relations:["hook"]},{name:"reward_token_vault",writable:!0,pda:{seeds:[{kind:"account",path:"hook"},{kind:"account",path:"reward_token_program"},{kind:"account",path:"reward_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"reward_token_program"},{name:"hooks_authority",signer:!0,relations:["config"]},{name:"system_program",address:"11111111111111111111111111111111"},{name:"event_authority",pda:{seeds:[{kind:"const",value:[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{name:"program"}],args:[{name:"rewards_per_second",type:"u64"},{name:"duration",type:"i64"}]}],accounts:[{name:"BinArray",discriminator:[92,142,92,220,5,148,70,181]},{name:"Hook",discriminator:[125,61,76,173,200,161,92,217]},{name:"HookBinArray",discriminator:[103,134,57,58,74,234,9,157]},{name:"HookPosition",discriminator:[125,149,132,62,52,71,211,143]},{name:"HooksConfig",discriminator:[221,108,154,235,72,117,10,9]},{name:"Pair",discriminator:[85,72,49,176,182,228,141,82]},{name:"Position",discriminator:[170,188,143,228,122,64,247,208]}],events:[{name:"HookInitializationEvent",discriminator:[229,217,175,38,112,240,117,95]},{name:"HookUpdateEvent",discriminator:[66,73,183,141,138,243,187,99]},{name:"HooksConfigInitializationEvent",discriminator:[0,32,252,233,70,49,186,150]}],errors:[{code:6e3,name:"CheckedAddSignedOverflow",msg:"Checked add signed overflow"},{code:6001,name:"CheckedAddOverflow",msg:"Checked add overflow"},{code:6002,name:"HookBinArrayIndexMismatch",msg:"Hook bin array index mismatch"},{code:6003,name:"BinNotFound",msg:"Bin not found"},{code:6004,name:"ShlDivError",msg:"Shift left division error"},{code:6005,name:"MulDivError",msg:"Mul div error"},{code:6006,name:"MulShrError",msg:"Mul shr error"},{code:6007,name:"CheckedMulOverflow",msg:"Checked Mul overflow"},{code:6008,name:"InvalidStartTime",msg:"Invalid start time"},{code:6009,name:"CheckedSubUnderflow",msg:"Checked sub underflow"},{code:6010,name:"ZeroRewards",msg:"Rewarder won't distribute any rewards"}],types:[{name:"Bin",serialization:"bytemuck",repr:{kind:"c"},type:{kind:"struct",fields:[{name:"total_supply",type:"u128"},{name:"reserve_x",type:"u64"},{name:"reserve_y",type:"u64"}]}},{name:"BinArray",serialization:"bytemuck",repr:{kind:"c"},type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"bins",type:{array:[{defined:{name:"Bin"}},256]}},{name:"index",type:"u32"},{name:"_space",type:{array:["u8",12]}}]}},{name:"DynamicFeeParameters",type:{kind:"struct",fields:[{name:"time_last_updated",type:"u64"},{name:"volatility_accumulator",type:"u32"},{name:"volatility_reference",type:"u32"},{name:"id_reference",type:"u32"},{name:"_space",type:{array:["u8",4]}}]}},{name:"Hook",type:{kind:"struct",fields:[{name:"bump",type:{array:["u8",1]}},{name:"config",type:"pubkey"},{name:"pair",type:"pubkey"},{name:"reward_token_mint",type:"pubkey"},{name:"rewards_per_second",type:"u64"},{name:"end_time",type:"i64"},{name:"last_update",type:"i64"},{name:"delta_bin_a",type:"i32"},{name:"delta_bin_b",type:"i32"},{name:"total_unclaimed_rewards",type:"u64"}]}},{name:"HookBinArray",serialization:"bytemuck",repr:{kind:"c"},type:{kind:"struct",fields:[{name:"hook",type:"pubkey"},{name:"index",type:"u32"},{name:"_space",type:{array:["u8",28]}},{name:"accrued_rewards_per_share",type:{array:["u128",256]}}]}},{name:"HookInitializationEvent",type:{kind:"struct",fields:[{name:"config",type:"pubkey"},{name:"pair",type:"pubkey"}]}},{name:"HookPosition",serialization:"bytemuck",repr:{kind:"c"},type:{kind:"struct",fields:[{name:"user_accrued_rewards_per_share",type:{array:["u128",64]}},{name:"pending_rewards",type:"u64"},{name:"bump",type:"u8"},{name:"_space",type:{array:["u8",7]}}]}},{name:"HookUpdateEvent",type:{kind:"struct",fields:[{name:"hook",type:"pubkey"},{name:"rewards_per_second",type:"u64"}]}},{name:"HooksConfig",type:{kind:"struct",fields:[{name:"liquidity_book_program",type:"pubkey"},{name:"hooks_authority",type:"pubkey"}]}},{name:"HooksConfigInitializationEvent",type:{kind:"struct",fields:[{name:"config",type:"pubkey"},{name:"liquidity_book_program",type:"pubkey"},{name:"preset_authority",type:"pubkey"}]}},{name:"Pair",type:{kind:"struct",fields:[{name:"bump",type:{array:["u8",1]}},{name:"liquidity_book_config",type:"pubkey"},{name:"bin_step",type:"u8"},{name:"bin_step_seed",type:{array:["u8",1]}},{name:"token_mint_x",type:"pubkey"},{name:"token_mint_y",type:"pubkey"},{name:"static_fee_parameters",type:{defined:{name:"StaticFeeParameters"}}},{name:"active_id",type:"u32"},{name:"dynamic_fee_parameters",type:{defined:{name:"DynamicFeeParameters"}}},{name:"protocol_fees_x",type:"u64"},{name:"protocol_fees_y",type:"u64"},{name:"hook",type:{option:"pubkey"}}]}},{name:"Position",serialization:"bytemuck",repr:{kind:"c"},type:{kind:"struct",fields:[{name:"pair",type:"pubkey"},{name:"position_mint",type:"pubkey"},{name:"liquidity_shares",type:{array:["u128",64]}},{name:"lower_bin_id",type:"u32"},{name:"upper_bin_id",type:"u32"},{name:"_space",type:{array:["u8",8]}}]}},{name:"StaticFeeParameters",type:{kind:"struct",fields:[{name:"base_factor",type:"u16"},{name:"filter_period",type:"u16"},{name:"decay_period",type:"u16"},{name:"reduction_factor",type:"u16"},{name:"variable_fee_control",type:"u32"},{name:"max_volatility_accumulator",type:"u32"},{name:"protocol_share",type:"u16"},{name:"_space",type:{array:["u8",2]}}]}}]},q=function(e){var t,n,r=(null==(t=e.options)?void 0:t.rpcUrl)||S[e.mode].rpc;this.connection=new i.Connection(r,(null==(n=e.options)?void 0:n.commitmentOrConfig)||"confirmed");var a=new o.AnchorProvider(this.connection,{},o.AnchorProvider.defaultOptions());this.lbProgram=new o.Program(E,a),this.hooksProgram=new o.Program(F,a)},T=function(){var e=y(v().m((function e(t,n){var r,a,i;return v().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,n.getParsedAccountInfo(t);case 1:return a=null==(r=e.v.value)?void 0:r.owner.toBase58(),i=a===s.TOKEN_PROGRAM_ID.toBase58()?s.TOKEN_PROGRAM_ID:s.TOKEN_2022_PROGRAM_ID,e.a(2,i)}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(e,t,n,r){var a,i=(a=e<<64)<0?null:1+a/1e4,o=t-8388608,s=Math.pow(10,n-r);return Math.pow(i,o)*s},C=function(e,t,n,r){if(e<=0)throw new Error("Giá phải lớn hơn 0");if(t<=0||t>1e4)throw new Error("Bin step invalid");var a=Math.pow(10,r-n),i=1+t/1e4,o=Math.log(e*a)/Math.log(i);return Math.round(o+8388608)},N=function(e){function t(t){var n;return(n=e.call(this,t)||this).name="LBError",n}return k(t,e),t}(I(Error));N.BinNotFound=new N("Bin not found"),N.BinArrayIndexMismatch=new N("Bin array index mismatch");var L=function(){function e(e,t,n){var r=this;if(t.index!==e.index+1||n.index!==t.index+1)throw N.BinArrayIndexMismatch;this.bins={};var a=function(e){e.bins.forEach((function(t,n){r.bins[256*e.index+n]=t}))};a(e),a(t),a(n)}var t=e.prototype;return t.getBinMut=function(e){return this.bins[e]},t.getAllBins=function(){return Object.values(this.bins)},e}(),R=function(){function e(e,t){this.lbProgram=e,this.connection=t,this.volatilityAccumulator=0,this.volatilityReference=0,this.referenceId=0,this.timeLastUpdated=0}e.fromLbConfig=function(t,n){return new e(t,n)};var t=e.prototype;return t.getBinArray=function(e){var t=e.binArrayIndex,n=e.pair;return i.PublicKey.findProgramAddressSync([Buffer.from(o.utils.bytes.utf8.encode("bin_array")),n.toBuffer(),new o.BN(t).toArrayLike(Buffer,"le",4)],this.lbProgram.programId)[0]},t.calculateInOutAmount=function(){var e=y(v().m((function e(t){var n,r,a,i,s,u,c,p,m,d,l,y=this;return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return n=t.amount,r=t.swapForY,a=t.pair,i=t.isExactInput,e.p=1,e.n=2,this.lbProgram.account.pair.fetch(a);case 2:if(s=e.v){e.n=3;break}throw new Error("Pair not found");case 3:return u=Math.floor(s.activeId/256),p=(c=[u-1,u,u+1]).map((function(e){return y.getBinArray({binArrayIndex:e,pair:a})})),e.n=4,Promise.all(p.map((function(e,t){return y.lbProgram.account.binArray.fetch(e).catch((function(e){return{index:c[t],bins:[]}}))})));case 4:if(!(d=new L((m=e.v)[0],m[1],m[2])).getAllBins().reduce((function(e,t){return e.add(t.totalSupply)}),new o.BN(0)).isZero()){e.n=5;break}return e.a(2,{amountIn:BigInt(0),amountOut:BigInt(0)});case 5:if(l=n,!i){e.n=7;break}return e.n=6,this.calculateAmountOut(l,d,s,r);case 6:return e.a(2,{amountIn:n,amountOut:e.v});case 7:return e.n=8,this.calculateAmountIn(l,d,s,r);case 8:return e.a(2,{amountIn:e.v,amountOut:l});case 9:e.n=11;break;case 10:throw e.p=10,new Error(e.v);case 11:return e.a(2)}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),t.calculateAmountIn=function(){var e=y(v().m((function e(t,n,r,a){var i,o,s,u,c,p,m;return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,i=BigInt(0),BigInt(0),o=t,s=r.activeId,u=0,e.n=1,this.updateReferences(r,s);case 1:if(!(o>BigInt(0))){e.n=4;break}if(u++,this.updateVolatilityAccumulator(r,s),c=n.getBinMut(s)){e.n=2;break}return e.a(3,4);case 2:if(p=this.getTotalFee(r),m=this.swapExactOutput({binStep:r.binStep,activeId:s,amountOutLeft:o,fee:p,protocolShare:r.staticFeeParameters.protocolShare,swapForY:a,reserveX:c.reserveX,reserveY:c.reserveY}),i+=m.amountInWithFees,o-=m.amountOut){e.n=3;break}return e.a(3,4);case 3:s=this.moveActiveId(s,a),e.n=1;break;case 4:if(!(u>=30)){e.n=5;break}throw"Swap crosses too many bins – quote aborted.";case 5:return e.a(2,i);case 6:throw e.p=6,e.v;case 7:return e.a(2)}}),e,this,[[0,6]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.calculateAmountOut=function(){var e=y(v().m((function e(t,n,r,a){var i,o,s,u,c,p,m;return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,i=BigInt(0),BigInt(0),o=t,s=r.activeId,u=0,e.n=1,this.updateReferences(r,s);case 1:if(!(o>BigInt(0))){e.n=4;break}if(u++,this.updateVolatilityAccumulator(r,s),c=n.getBinMut(s)){e.n=2;break}return e.a(3,4);case 2:if(p=this.getTotalFee(r),m=this.swapExactInput({binStep:r.binStep,activeId:s,amountInLeft:o,fee:p,protocolShare:r.staticFeeParameters.protocolShare,swapForY:a,reserveX:c.reserveX,reserveY:c.reserveY}),i+=m.amountOut,o-=m.amountInWithFees){e.n=3;break}return e.a(3,4);case 3:s=this.moveActiveId(s,a),e.n=1;break;case 4:if(!(u>=30)){e.n=5;break}throw"Swap crosses too many bins – quote aborted.";case 5:return e.a(2,i);case 6:throw e.p=6,e.v;case 7:return e.a(2)}}),e,this,[[0,6]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.swapExactOutput=function(e){var t=e.binStep,n=e.activeId,r=e.amountOutLeft,a=e.swapForY,i=e.reserveX,o=e.reserveY,s=e.fee,u=BigInt(e.protocolShare),c=a?o:i;if(c.isZero())return{amountInWithFees:BigInt(0),amountOut:BigInt(0),feeAmount:BigInt(0),protocolFeeAmount:BigInt(0)};var p=BigInt(c.toString()),m=r>p?p:r,d=O(t,n,9,9),l=BigInt(Math.round(Number(d)*Math.pow(2,64))),y=this.calcAmountInByPrice(m,l,64,a,"up"),_=this.getFeeForAmount(y,s);return{amountInWithFees:y+_,amountOut:m,feeAmount:_,protocolFeeAmount:this.getProtocolFee(_,u)}},t.swapExactInput=function(e){var t=e.binStep,n=e.activeId,r=e.amountInLeft,a=e.protocolShare,i=e.swapForY,o=e.reserveX,s=e.reserveY,u=e.fee,c=BigInt(a),p=i?s:o;if(p.isZero())return{amountInWithFees:BigInt(0),amountOut:BigInt(0),feeAmount:BigInt(0),protocolFeeAmount:BigInt(0)};var m=BigInt(p.toString()),d=O(t,n,9,9),l=BigInt(Math.round(Number(d)*Math.pow(2,64))),y=this.calcAmountInByPrice(m,l,64,i,"up"),_=this.getFeeForAmount(y,u);y+=_;var f=BigInt(0),b=BigInt(0),h=BigInt(0);return r>=y?(b=y-(h=_),f=m):(h=this.getFeeAmount(r,u),(f=this.calcAmountOutByPrice(b=r-h,l,64,i,"down"))>m&&(f=m)),{amountInWithFees:b+h,amountOut:f,feeAmount:h,protocolFeeAmount:a>BigInt(0)?this.getProtocolFee(h,c):BigInt(0)}},t.updateReferences=function(){var e=y(v().m((function e(t,n){var r,a,i;return v().w((function(e){for(;;)switch(e.n){case 0:return this.referenceId=t.dynamicFeeParameters.idReference,this.timeLastUpdated=t.dynamicFeeParameters.timeLastUpdated.toNumber(),this.volatilityReference=t.dynamicFeeParameters.volatilityReference,e.n=1,this.connection.getSlot();case 1:return r=e.v,e.n=2,this.connection.getBlockTime(r);case 2:if(!(a=e.v)){e.n=5;break}if(!((i=a-this.timeLastUpdated)>t.staticFeeParameters.filterPeriod)){e.n=4;break}if(this.referenceId=n,!(i>=t.staticFeeParameters.decayPeriod)){e.n=3;break}this.volatilityReference=0,e.n=4;break;case 3:return e.a(2,this.updateVolatilityReference(t));case 4:this.timeLastUpdated=a;case 5:return e.a(2,this.updateVolatilityAccumulator(t,n))}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.updateVolatilityReference=function(e){this.volatilityReference=e.dynamicFeeParameters.volatilityAccumulator*e.staticFeeParameters.reductionFactor/1e4},t.updateVolatilityAccumulator=function(e,t){var n=1e4*Math.abs(t-this.referenceId)+this.volatilityReference,r=e.staticFeeParameters.maxVolatilityAccumulator;this.volatilityAccumulator=n>r?r:n},t.getVariableFee=function(e){var t=BigInt(e.staticFeeParameters.variableFeeControl);if(t>BigInt(0)){var n=BigInt(Math.floor(this.volatilityAccumulator*e.binStep));return(n*n*t+BigInt(1e11)-BigInt(1))/BigInt(1e11)}return t},t.getBaseFee=function(e,t){return BigInt(e)*BigInt(t)*BigInt(10)},t.getFeeForAmount=function(e,t){var n=BigInt(1e9)-t;return(e*t+n-BigInt(1))/n},t.getFeeAmount=function(e,t){return(e*t+BigInt(1e9)-BigInt(1))/BigInt(1e9)},t.getProtocolFee=function(e,t){return e*t/BigInt(1e4)},t.getTotalFee=function(e){return this.getBaseFee(e.binStep,e.staticFeeParameters.baseFactor)+this.getVariableFee(e)},t.moveActiveId=function(e,t){return t?e-1:e+1},t.calcAmountInByPrice=function(e,t,n,r,a){return r?"up"===a?((e<<BigInt(n))+t-BigInt(1))/t:(e<<BigInt(n))/t:"up"===a?e*t+(BigInt(1)<<BigInt(n))-BigInt(1)>>BigInt(n):e*t>>BigInt(n)},t.calcAmountOutByPrice=function(e,t,n,r,a){return r?"up"===a?e*t+(BigInt(1)<<BigInt(n))-BigInt(1)>>BigInt(n):e*t>>BigInt(n):"up"===a?((e<<BigInt(n))+t-BigInt(1))/t:(e<<BigInt(n))/t},e}(),D=function(e,t){if(0===t)throw new Error("Division by zero");return[e/t,e%t]},V=function(e,t,n,r){var a=e*t;return"up"===r?Math.floor((a+n-1)/n):"down"===r?D(a,n)[0]:void 0},X=function(e,t,n,r){return V(e,1<<n,t,r)},Y=function(e,t){var n=Math.floor(t%16),r=[-n,16-n-1],a=[r[0]+16*e,r[1]+16*e];return{range:a,binLower:t+a[0],binUpper:t+a[1]-1}},K=function(){var e=y(v().m((function e(t){var n;return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return n=100,e.p=1,e.n=2,new Promise(function(){var e=y(v().m((function e(r){var a,i,o;return v().w((function(e){for(;;)switch(e.n){case 0:return a=setTimeout((function(){r(1e6*n)}),2e3),e.n=1,t.getRecentPrioritizationFees();case 1:i=e.v.filter((function(e){return(null==e?void 0:e.prioritizationFee)>0})).map((function(e){return null==e?void 0:e.prioritizationFee})),clearTimeout(a),o=i.length>0?Math.max.apply(Math,i.concat([1e6])):1e6,r(o*n);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.a(2,e.v);case 3:return e.p=3,e.a(2,1e6*n)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){function t(t){return e.call(this,t)||this}k(t,e);var n,r,a=t.prototype;return a.getPairAccount=function(){var e=y(v().m((function e(t){return v().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,this.lbProgram.account.pair.fetch(t);case 1:return e.a(2,e.v)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getPositionAccount=function(){var e=y(v().m((function e(t){return v().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,this.lbProgram.account.position.fetch(t);case 1:return e.a(2,e.v)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getBinArray=function(){var e=y(v().m((function e(t){var n,r,a,s,c;return v().w((function(e){for(;;)switch(e.n){case 0:if(n=t.binArrayIndex,r=t.pair,a=t.payer,s=t.transaction,c=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("bin_array")),r.toBuffer(),new o.BN(n).toArrayLike(u.Buffer,"le",4)],this.lbProgram.programId)[0],!s||!a){e.n=3;break}return e.n=1,this.connection.getAccountInfo(c);case 1:if(e.v){e.n=3;break}return e.n=2,this.lbProgram.methods.initializeBinArray(n).accountsPartial({pair:r,binArray:c,user:a}).instruction();case 2:s.add(e.v);case 3:return e.a(2,c)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getBinArrayInfo=function(){var e=y(v().m((function e(t){var n,r,a,i,o,s,u,c,p;return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return r=t.pair,a=t.payer,i=n=t.binArrayIndex,o=[],e.n=1,this.getBinArray({binArrayIndex:n,pair:r,payer:a});case 1:return s=e.v,e.n=2,this.lbProgram.account.binArray.fetch(s);case 2:return u=e.v.bins,e.p=3,e.n=4,this.getBinArray({binArrayIndex:n+1,pair:r,payer:a});case 4:return c=e.v,e.n=5,this.lbProgram.account.binArray.fetch(c);case 5:o=[].concat(u,e.v.bins),e.n=9;break;case 6:return e.p=6,e.n=7,this.getBinArray({binArrayIndex:n-1,pair:r,payer:a});case 7:return p=e.v,e.n=8,this.lbProgram.account.binArray.fetch(p);case 8:o=[].concat(e.v.bins,u),i-=1;case 9:return e.a(2,{bins:o,resultIndex:i})}}),e,this,[[3,6]])})));return function(t){return e.apply(this,arguments)}}(),a.getBinsReserveInformation=function(){var e=y(v().m((function e(t){var n,r,a,i,o,s,u,c,p,m,d;return v().w((function(e){for(;;)switch(e.n){case 0:return n=t.position,r=t.pair,a=t.payer,e.n=1,this.getPositionAccount(n);case 1:return o=(i=e.v).lowerBinId,s=Math.floor(o/256),e.n=2,this.getBinArrayInfo({binArrayIndex:s,pair:r,payer:a});case 2:return c=(u=e.v).bins,p=256*u.resultIndex,m=Array.from({length:i.upperBinId-o+1},(function(e,t){return o-p+t})),d=m.map((function(e,t){var n=i.liquidityShares[t].toString(),r=c[e];if(r){var a=+BigInt(r.reserveX).toString(),s=+BigInt(r.reserveY).toString(),u=+BigInt(r.totalSupply).toString();return{reserveX:(Number(a)>0?V(Number(n),Number(a),Number(u),"down"):0)||0,reserveY:(Number(s)>0?V(Number(n),Number(s),Number(u),"down"):0)||0,totalSupply:+BigInt(r.totalSupply).toString(),binId:o+t,binPosistion:e,liquidityShare:i.liquidityShares[t]}}return{reserveX:0,reserveY:0,totalSupply:"0",binId:o+t,binPosistion:e,liquidityShare:n}})),e.a(2,d)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.createPairWithConfig=function(){var e=y(v().m((function e(t){var n,r,a,s,c,p,m,d,l,y,_,f,b,h,k;return v().w((function(e){for(;;)switch(e.n){case 0:return r=t.tokenQuote,a=t.binStep,s=t.ratePrice,c=t.payer,p=new i.PublicKey((n=t.tokenBase).mintAddress),m=new i.PublicKey(r.mintAddress),d=C(s||1,a,n.decimal,r.decimal),l=d/256,d%256<128&&(l-=1),y=new i.Transaction,_=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("bin_step_config")),this.lbConfig.toBuffer(),new Uint8Array([a])],this.lbProgram.programId)[0],f=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("quote_asset_badge")),this.lbConfig.toBuffer(),m.toBuffer()],this.lbProgram.programId)[0],b=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("pair")),this.lbConfig.toBuffer(),p.toBuffer(),m.toBuffer(),new Uint8Array([a])],this.lbProgram.programId)[0],e.n=1,this.lbProgram.methods.initializePair(d).accountsPartial({liquidityBookConfig:this.lbConfig,binStepConfig:_,quoteAssetBadge:f,pair:b,tokenMintX:p,tokenMintY:m,user:c}).instruction();case 1:return y.add(e.v),h=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("bin_array")),b.toBuffer(),new o.BN(l).toArrayLike(u.Buffer,"le",4)],this.lbProgram.programId)[0],k=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("bin_array")),b.toBuffer(),new o.BN(Number(l)+1).toArrayLike(u.Buffer,"le",4)],this.lbProgram.programId)[0],e.n=2,this.lbProgram.methods.initializeBinArray(l).accountsPartial({pair:b,binArray:h,user:c}).instruction();case 2:return y.add(e.v),e.n=3,this.lbProgram.methods.initializeBinArray(new o.BN(l+1)).accountsPartial({pair:b,binArray:k,user:c}).instruction();case 3:return y.add(e.v),e.a(2,{tx:y,pair:b.toString(),binArrayLower:h.toString(),binArrayUpper:k.toString(),hooksConfig:this.hooksConfig.toString(),activeBin:Number(d)})}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.createPosition=function(){var e=y(v().m((function e(t){var n,r,a,c,p,m,d,l,y;return v().w((function(e){for(;;)switch(e.n){case 0:return n=t.payer,r=t.relativeBinIdLeft,a=t.relativeBinIdRight,c=t.pair,p=t.binArrayIndex,m=t.positionMint,d=t.transaction,l=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("position")),m.toBuffer()],this.lbProgram.programId)[0],y=s.getAssociatedTokenAddressSync(m,n,!0,s.TOKEN_2022_PROGRAM_ID),e.n=1,this.getBinArray({binArrayIndex:p,pair:c,payer:n});case 1:return e.n=2,this.getBinArray({binArrayIndex:p+1,pair:c,payer:n});case 2:return e.n=3,this.lbProgram.methods.createPosition(new o.BN(r),new o.BN(a)).accountsPartial({pair:c,position:l,positionMint:m,positionTokenAccount:y,tokenProgram:s.TOKEN_2022_PROGRAM_ID,user:n}).instruction();case 3:return d.add(e.v),e.a(2,{position:l.toString()})}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.addLiquidityIntoPosition=function(){var e=y(v().m((function e(t){var n,r,a,c,p,m,d,l,y,_,f,b,h,k,g,w,P,A,B,I,S,x,E,F,q,O,C;return v().w((function(e){for(;;)switch(e.n){case 0:return a=t.positionMint,c=t.payer,p=t.pair,m=t.binArrayLower,d=t.binArrayUpper,l=t.transaction,y=t.liquidityDistribution,_=t.amountX,f=t.amountY,e.n=1,this.getPairAccount(p);case 1:return b=e.v,e.n=2,T(b.tokenMintX,this.connection);case 2:return h=e.v,e.n=3,T(b.tokenMintY,this.connection);case 3:return k=e.v,e.n=4,this.getPairVaultInfo({tokenAddress:b.tokenMintX,pair:p});case 4:return g=e.v,e.n=5,this.getPairVaultInfo({tokenAddress:b.tokenMintY,pair:p});case 5:return w=e.v,e.n=6,this.getUserVaultInfo({tokenAddress:b.tokenMintX,payer:c});case 6:return P=e.v,e.n=7,this.getUserVaultInfo({tokenAddress:b.tokenMintY,payer:c});case 7:return A=e.v,b.tokenMintY.toString()!==M&&b.tokenMintX.toString()!==M||(B=b.tokenMintY.toString()===M,I=B?f:_,(S=y.reduce((function(e,t){return e+(B?t.distributionY:t.distributionX)}),0))&&(l.add(i.SystemProgram.transfer({fromPubkey:c,toPubkey:x=B?A:P,lamports:S*I/1e4})),l.add(s.createSyncNativeInstruction(x)))),e.n=8,K(this.connection).catch((function(){}));case 8:return E=Math.max(null!=(n=Number(e.v))?n:0,1e6*(null!=(r=this.bufferGas)?r:1)),F=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("hook")),this.hooksConfig.toBuffer(),p.toBuffer()],this.hooksProgram.programId)[0],q=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("position")),a.toBuffer()],this.lbProgram.programId)[0],O=s.getAssociatedTokenAddressSync(a,c,!0,s.TOKEN_2022_PROGRAM_ID),e.n=9,this.lbProgram.methods.increasePosition(new o.BN(_),new o.BN(f),y).accountsPartial({pair:p,position:q,binArrayLower:m,binArrayUpper:d,tokenVaultX:g,tokenVaultY:w,userVaultX:P,userVaultY:A,positionTokenAccount:O,tokenMintX:b.tokenMintX,tokenMintY:b.tokenMintY,tokenProgramX:h,tokenProgramY:k,positionTokenProgram:s.TOKEN_2022_PROGRAM_ID,hook:F,hooksProgram:this.hooksProgram.programId,user:c,positionMint:a}).remainingAccounts([{pubkey:p,isWritable:!1,isSigner:!1},{pubkey:m,isWritable:!1,isSigner:!1},{pubkey:d,isWritable:!1,isSigner:!1}]).instruction();case 9:C=e.v,l.add(i.ComputeBudgetProgram.setComputeUnitLimit({units:4e5})),l.add(i.ComputeBudgetProgram.setComputeUnitPrice({microLamports:E})),l.add(C);case 10:return e.a(2)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.removeMultipleLiquidity=function(){var e=y(v().m((function e(t){var n,r,a,p,m,d,l,_,f,b,h,k,g,w,P,A,B,I,S,x,E,F,q,O=this;return v().w((function(e){for(;;)switch(e.n){case 0:return a=t.maxPositionList,p=t.payer,m=t.type,d=t.pair,l=t.tokenMintX,_=t.tokenMintY,e.n=1,T(l,this.connection);case 1:return f=e.v,e.n=2,T(_,this.connection);case 2:return b=e.v,h=new i.Transaction,e.n=3,this.getPairVaultInfo({tokenAddress:l,pair:d,payer:p,transaction:h});case 3:return k=e.v,e.n=4,this.getPairVaultInfo({tokenAddress:_,pair:d,payer:p,transaction:h});case 4:return g=e.v,e.n=5,this.getUserVaultInfo({tokenAddress:l,payer:p,transaction:h});case 5:return w=e.v,e.n=6,this.getUserVaultInfo({tokenAddress:_,payer:p,transaction:h});case 6:return P=e.v,A=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("hook")),this.hooksConfig.toBuffer(),d.toBuffer()],this.hooksProgram.programId)[0],B=s.getAssociatedTokenAddressSync(_,A,!0,b),e.n=7,this.connection.getAccountInfo(B);case 7:return e.v||(I=s.createAssociatedTokenAccountInstruction(p,B,A,_,b),h.add(I)),e.n=8,K(this.connection).catch((function(){}));case 8:return S=Math.max(null!=(n=Number(e.v))?n:0,1e6*(null!=(r=this.bufferGas)?r:1)),x=[],e.n=9,Promise.all(a.map(function(){var e=y(v().m((function e(t){var n,r,a,y,h,B,I,M,E,F,q,T,C,N,L,R,D,V,X;return v().w((function(e){for(;;)switch(e.n){case 0:return n=t.position,r=t.start,a=t.end,y=t.positionMint,h=Math.floor(r/256),e.n=1,O.getBinArrayInfo({binArrayIndex:h,pair:d,payer:p});case 1:return B=e.v.resultIndex,e.n=2,O.getBinArray({binArrayIndex:B,pair:d,payer:p});case 2:return I=e.v,e.n=3,O.getBinArray({binArrayIndex:B+1,pair:d,payer:p});case 3:return M=e.v,(E=new i.Transaction).add(i.ComputeBudgetProgram.setComputeUnitLimit({units:4e5})),E.add(i.ComputeBudgetProgram.setComputeUnitPrice({microLamports:S})),F=s.getAssociatedTokenAddressSync(new i.PublicKey(y),p,!0,s.TOKEN_2022_PROGRAM_ID),X=c,e.n=4,O.getBinsReserveInformation({position:new i.PublicKey(n),pair:d,payer:p});case 4:if(q=X(e.v),T=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("bin_array")),A.toBuffer(),new o.BN(32767).toArrayLike(u.Buffer,"le",4)],O.hooksProgram.programId)[0],C=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("bin_array")),A.toBuffer(),new o.BN(32768).toArrayLike(u.Buffer,"le",4)],O.hooksProgram.programId)[0],N=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("position")),A.toBuffer(),new i.PublicKey(n).toBuffer()],O.hooksProgram.programId)[0],L=[],"removeBoth"===m&&(L=q.map((function(e){var t=e.binId;return t>=Number(r)&&t<=Number(a)?e.liquidityShare:new o.BN(0)}))),"removeBaseToken"===m&&(L=q.map((function(e){return e.reserveX&&0===e.reserveY?e.liquidityShare:new o.BN(0)}))),"removeQuoteToken"===m&&(L=q.map((function(e){return e.reserveY&&0===e.reserveX?e.liquidityShare:new o.BN(0)}))),R=q.filter((function(e){return"removeBoth"===m?!new o.BN(e.liquidityShare).eq(new o.BN(0)):"removeQuoteToken"===m?!e.reserveX:!e.reserveY})),!("removeBoth"===m&&a-r+1>=R.length||a-r+1==16&&16===R.length)){e.n=6;break}return e.n=5,O.lbProgram.methods.closePosition().accountsPartial({pair:d,position:n,binArrayLower:I,binArrayUpper:M,tokenVaultX:k,tokenVaultY:g,userVaultX:w,userVaultY:P,positionTokenAccount:F,tokenMintX:l,tokenMintY:_,tokenProgramX:f,tokenProgramY:b,positionTokenProgram:s.TOKEN_2022_PROGRAM_ID,hook:A,hooksProgram:O.hooksProgram.programId,user:p,positionMint:y}).instruction();case 5:D=e.v,x.push({position:n}),E.add(D),e.n=8;break;case 6:return e.n=7,null==(V=O.lbProgram.methods.decreasePosition(L).accountsPartial({pair:d,position:n,binArrayLower:I,binArrayUpper:M,tokenVaultX:k,tokenVaultY:g,userVaultX:w,userVaultY:P,positionTokenAccount:F,tokenMintX:l,tokenMintY:_,tokenProgramX:f,tokenProgramY:b,positionTokenProgram:s.TOKEN_2022_PROGRAM_ID,hook:A,hooksProgram:O.hooksProgram.programId,user:p,positionMint:y}))?void 0:V.remainingAccounts([{pubkey:d,isWritable:!1,isSigner:!1},{pubkey:I,isWritable:!1,isSigner:!1},{pubkey:M,isWritable:!1,isSigner:!1},{pubkey:T,isWritable:!0,isSigner:!1},{pubkey:C,isWritable:!0,isSigner:!1},{pubkey:N,isWritable:!0,isSigner:!1}]).instruction();case 7:E.add(e.v);case 8:return e.a(2,E)}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return E=e.v,F=new i.Transaction,_.toString()!==M&&l.toString()!==M||(q=_.toString()===M,F.add(s.createCloseAccountInstruction(q?P:w,p,p))),e.a(2,{txs:E,txCreateAccount:h.instructions.length?h:void 0,txCloseAccount:F.instructions.length?F:void 0,positionClosed:x})}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.swap=function(){var e=y(v().m((function e(t){var n,r,a,c,p,m,d,l,_,f,b,h,k,g,w,P,A,B,I,S,x,E,F,q,O,C,N,L,R,D,V,X,Y,K,U,W,z,H,j,G,Q=this;return v().w((function(e){for(;;)switch(e.n){case 0:return n=t.tokenMintX,r=t.tokenMintY,a=t.amount,c=t.otherAmountOffset,p=t.swapForY,m=t.isExactInput,d=t.pair,l=t.hook,_=t.payer,e.n=1,this.getPairAccount(d);case 1:if(f=e.v){e.n=2;break}throw new Error("Pair not found");case 2:return b=Math.floor(f.activeId/256),h=[b-1,b,b+1],e.n=3,Promise.all(h.map(function(){var e=y(v().m((function e(t){return v().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Q.getBinArray({binArrayIndex:t,pair:d,payer:_});case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return k=e.v,e.n=4,this.connection.getMultipleAccountsInfo(k);case 4:if(g=e.v,!((w=h.filter((function(e,t){return g[t]}))).length<2)){e.n=5;break}throw new Error("No valid bin arrays found for the pair");case 5:return 2===w.length?(P=w[0],A=w[1]):(B=w[0],I=w[1],S=w[2],P=(x=f.activeId%256<128?[B,I]:[I,S])[0],A=x[1]),e.n=6,this.getBinArray({pair:d,binArrayIndex:P,payer:_});case 6:return E=e.v,e.n=7,this.getBinArray({pair:d,binArrayIndex:A,payer:_});case 7:return F=e.v,e.n=8,Promise.all([T(n,this.connection),T(r,this.connection)]);case 8:return O=(q=e.v)[0],C=q[1],e.n=9,this.connection.getLatestBlockhash();case 9:return L=new i.Transaction({feePayer:_,blockhash:(N=e.v).blockhash,lastValidBlockHeight:N.lastValidBlockHeight}),R=s.getAssociatedTokenAddressSync(n,d,!0,O),D=s.getAssociatedTokenAddressSync(r,d,!0,C),V=s.getAssociatedTokenAddressSync(n,_,!0,O),X=s.getAssociatedTokenAddressSync(r,_,!0,C),e.n=10,this.connection.getAccountInfo(V);case 10:return e.v||(Y=s.createAssociatedTokenAccountInstruction(_,V,_,n,O),L.add(Y)),e.n=11,this.connection.getAccountInfo(X);case 11:return e.v||(K=s.createAssociatedTokenAccountInstruction(_,X,_,r,C),L.add(K)),U=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("bin_array")),l.toBuffer(),new o.BN(32767).toArrayLike(u.Buffer,"le",4)],this.hooksProgram.programId)[0],W=i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("bin_array")),l.toBuffer(),new o.BN(32768).toArrayLike(u.Buffer,"le",4)],this.hooksProgram.programId)[0],r.toString()!==M&&n.toString()!==M||(z=r.toString()===M,H=z?X:V,z&&!p&&(L.add(i.SystemProgram.transfer({fromPubkey:_,toPubkey:H,lamports:a})),L.add(s.createSyncNativeInstruction(H))),!z&&p&&(L.add(i.SystemProgram.transfer({fromPubkey:_,toPubkey:H,lamports:a})),L.add(s.createSyncNativeInstruction(H)))),e.n=12,this.lbProgram.methods.swap(new o.BN(a.toString()),new o.BN(c.toString()),p,m?{exactInput:{}}:{exactOutput:{}}).accountsPartial({pair:d,binArrayLower:E,binArrayUpper:F,tokenVaultX:R,tokenVaultY:D,userVaultX:V,userVaultY:X,tokenMintX:n,tokenMintY:r,tokenProgramX:O,tokenProgramY:C,user:_}).remainingAccounts([{pubkey:d,isWritable:!1,isSigner:!1},{pubkey:E,isWritable:!1,isSigner:!1},{pubkey:F,isWritable:!1,isSigner:!1},{pubkey:U,isWritable:!0,isSigner:!1},{pubkey:W,isWritable:!0,isSigner:!1}]).instruction();case 12:return L.add(e.v),r.toString()!==M&&n.toString()!==M||(j=r.toString()===M,G=j?X:V,(j&&p||!j&&!p)&&L.add(s.createCloseAccountInstruction(G,_,_))),e.a(2,L)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getQuote=function(){var e=y(v().m((function e(t){var n,r,a,i,o,s,u,c;return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,R.fromLbConfig(this.lbProgram,this.connection).calculateInOutAmount(t);case 1:return r=(n=e.v).amountIn,a=n.amountOut,i=Math.round(t.slippage/100*1e9),o=r,s=a,t.isExactInput?s=a*BigInt(1e9-i)/BigInt(1e9):o=r*BigInt(1e9)/BigInt(1e9-i),e.n=2,this.getMaxAmountOutWithFee(t.pair,Number(r.toString()),t.swapForY,t.tokenBaseDecimal,t.tokenQuoteDecimal);case 2:return u=e.v.maxAmountOut,c=new p(a).subtract(new p(u)).divide(new p(u)).multiply(new p(100)).getValue(),e.a(2,{amountIn:r,amountOut:a,amount:t.isExactInput?o:s,otherAmountOffset:t.isExactInput?s:o,priceImpact:Number(c)});case 3:throw e.p=3,e.v;case 4:return e.a(2)}}),e,this,[[0,3]])})));return function(t){return e.apply(this,arguments)}}(),a.getMaxAmountOutWithFee=function(){var e=y(v().m((function e(t,n,r,a,i){var o,s,u,c,p,m,d,l,y,_;return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return void 0===r&&(r=!1),void 0===a&&(a=9),void 0===i&&(i=9),e.p=1,o=BigInt(n),e.n=2,this.getPairAccount(t);case 2:return u=null==(s=e.v)?void 0:s.activeId,c=null==s?void 0:s.binStep,p=R.fromLbConfig(this.lbProgram,this.connection),m=p.getTotalFee(s),d=O(c,u,9,9),l=O(c,u,a,i),y=p.getFeeAmount(o,m),o=BigInt(o)-BigInt(y),_=r?(f=Number(o.toString()),V(f,d,1,"down")):X(Number(o.toString()),d,64,"down"),e.a(2,{maxAmountOut:_,price:l});case 3:return e.p=3,e.a(2,{maxAmountOut:0,price:0})}var f}),e,this,[[1,3]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),a.getDexName=function(){return"Saros DLMM"},a.getDexProgramId=function(){return this.lbProgram.programId},a.fetchPoolAddresses=function(){var e=y(v().m((function e(){var t,n,r,a,o,s;return v().w((function(e){for(;;)switch(e.n){case 0:if(t=this.getDexProgramId(),n=this.connection,r=E.accounts.find((function(e){return"Pair"===e.name})),a=r?r.discriminator:void 0){e.n=1;break}throw new Error("Pair account not found");case 1:return e.n=2,n.getProgramAccounts(new i.PublicKey(t),{filters:[{memcmp:{offset:0,bytes:m.bs58.encode(a)}}]});case 2:if(0!==(o=e.v).length){e.n=3;break}throw new Error("Pair not found");case 3:return s=o.reduce((function(e,n){return n.account.owner.toString()!==t.toString()||n.account.data.length<8||e.push(n.pubkey.toString()),e}),[]),e.a(2,s)}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getUserPositions=function(){var e=y(v().m((function e(t){var n,r,a,c,p=this;return v().w((function(e){for(;;)switch(e.n){case 0:return n=t.payer,r=t.pair,a=this.connection,e.n=1,a.getParsedTokenAccountsByOwner(n,{programId:s.TOKEN_2022_PROGRAM_ID});case 1:return c=e.v.value.filter((function(e){var t=e.account.data.parsed.info.tokenAmount.uiAmount;return t&&t>0})).map((function(e){return new i.PublicKey(e.account.data.parsed.info.mint)})),e.n=2,Promise.all(c.map(function(){var e=y(v().m((function e(t){var n,s;return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,i.PublicKey.findProgramAddressSync([u.Buffer.from(o.utils.bytes.utf8.encode("position")),t.toBuffer()],p.lbProgram.programId);case 1:return n=e.v[0],e.p=2,e.n=3,a.getAccountInfo(n);case 3:if(e.v){e.n=4;break}return e.a(2,null);case 4:return e.n=5,p.lbProgram.account.position.fetch(n);case 5:if((s=e.v).pair.toString()===r.toString()){e.n=6;break}return e.a(2,null);case 6:return e.a(2,b({},s,{position:n.toString()}));case 7:return e.p=7,e.a(2,null)}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.a(2,e.v.filter(Boolean))}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.quote=function(){var e=y(v().m((function e(t){var n,r,a;return v().w((function(e){for(;;)switch(e.n){case 0:return n=t.amount,r=t.metadata,a=t.optional,e.n=1,this.getQuote({amount:BigInt(n),isExactInput:a.isExactInput,pair:new i.PublicKey(r.poolAddress),slippage:a.slippage,swapForY:a.swapForY,tokenBase:new i.PublicKey(r.baseMint),tokenBaseDecimal:r.extra.tokenBaseDecimal,tokenQuote:new i.PublicKey(r.quoteMint),tokenQuoteDecimal:r.extra.tokenQuoteDecimal});case 1:return e.a(2,e.v)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.fetchPoolMetadata=function(){var e=y(v().m((function e(t){var n,r,a,o,s,u,c,p;return v().w((function(e){for(;;)switch(e.n){case 0:return r=this.connection,e.n=1,this.lbProgram.account.pair.fetch(new i.PublicKey(t));case 1:if(a=e.v){e.n=2;break}throw new Error("Pair not found");case 2:return e.n=3,this.getPairVaultInfo({tokenAddress:new i.PublicKey(a.tokenMintX),pair:new i.PublicKey(t)});case 3:return o=e.v,e.n=4,this.getPairVaultInfo({tokenAddress:new i.PublicKey(a.tokenMintY),pair:new i.PublicKey(t)});case 4:return s=e.v,e.n=5,Promise.all([r.getTokenAccountBalance(o).catch((function(){return{value:{uiAmount:0,amount:"0",decimals:0,uiAmountString:"0"}}})),r.getTokenAccountBalance(s).catch((function(){return{value:{uiAmount:0,amount:"0",decimals:0,uiAmountString:"0"}}}))]);case 5:return c=(u=e.v)[0],p=u[1],e.a(2,{poolAddress:t,baseMint:a.tokenMintX.toString(),baseReserve:c.value.amount,quoteMint:a.tokenMintY.toString(),quoteReserve:p.value.amount,tradeFee:a.staticFeeParameters.baseFactor*a.binStep/1e6,extra:{hook:null==(n=a.hook)?void 0:n.toString(),tokenQuoteDecimal:c.value.decimals,tokenBaseDecimal:p.value.decimals}})}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getPairVaultInfo=function(){var e=y(v().m((function e(t){var n,r,a,o,u,c,p;return v().w((function(e){for(;;)switch(e.n){case 0:return n=t.pair,r=t.payer,a=t.transaction,o=new i.PublicKey(t.tokenAddress),e.n=1,T(o,this.connection);case 1:if(c=s.getAssociatedTokenAddressSync(o,n,!0,u=e.v),!a||!r){e.n=3;break}return e.n=2,this.connection.getAccountInfo(c);case 2:e.v||(p=s.createAssociatedTokenAccountInstruction(r,c,n,o,u),a.add(p));case 3:return e.a(2,c)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getUserVaultInfo=function(){var e=y(v().m((function e(t){var n,r,a,i,o,u;return v().w((function(e){for(;;)switch(e.n){case 0:return n=t.tokenAddress,r=t.payer,a=t.transaction,e.n=1,T(n,this.connection);case 1:if(o=s.getAssociatedTokenAddressSync(n,r,!0,i=e.v),!a){e.n=3;break}return e.n=2,this.connection.getAccountInfo(o);case 2:e.v||(u=s.createAssociatedTokenAccountInstruction(r,o,r,n,i),a.add(u));case 3:return e.a(2,o)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.listenNewPoolAddress=function(){var e=y(v().m((function e(t){var n,r=this;return v().w((function(e){for(;;)switch(e.n){case 0:n=this.getDexProgramId(),this.connection.onLogs(n,(function(e){if(!e.err)for(var n,a=f(e.logs||[]);!(n=a()).done;)n.value.includes("Instruction: InitializePair")&&r.getPairAddressFromLogs(e.signature).then((function(e){t(e)}))}),"finalized");case 1:return e.a(2)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getPairAddressFromLogs=function(){var e=y(v().m((function e(t){var n,r,a,o,s,c,p,m,d;return v().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,this.connection.getTransaction(t,{maxSupportedTransactionVersion:0});case 1:if(n=e.v){e.n=2;break}throw new Error("Transaction not found");case 2:r=i.TransactionMessage.decompile(n.transaction.message),a=r.instructions,o=E.instructions.find((function(e){return"initialize_pair"===e.name})),s=u.Buffer.from(o.discriminator),c="",p=v().m((function e(){var t,n,r;return v().w((function(e){for(;;)switch(e.n){case 0:if((n=d.value).data.subarray(0,8).equals(s)){e.n=1;break}return e.a(2,1);case 1:r=o.accounts.map((function(e,t){return{name:e.name,address:n.keys[t].pubkey.toString()}})),c=(null==(t=r.find((function(e){return"pair"===e.name})))?void 0:t.address)||"";case 2:return e.a(2)}}),e)})),m=f(a);case 3:if((d=m()).done){e.n=6;break}return e.d(P(p()),4);case 4:if(!e.v){e.n=5;break}return e.a(3,5);case 5:e.n=3;break;case 6:return e.a(2,c)}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n=t,(r=[{key:"lbConfig",get:function(){return new i.PublicKey("BqPmjcPbAwE7mH23BY8q8VUEN4LSjhLUv41W87GsXVn8")}},{key:"hooksConfig",get:function(){return new i.PublicKey("DgW5ARD9sU3W6SJqtyJSH3QPivxWt7EMvjER9hfFKWXF")}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(q);exports.ACTIVE_ID=8388608,exports.BASE_FACTOR=8e3,exports.BASIS_POINT_MAX=1e4,exports.BIN_ARRAY_INDEX=32767,exports.BIN_ARRAY_SIZE=256,exports.BIN_STEP=1,exports.BIN_STEP_CONFIGS=[{binStep:1,feeParameters:{baseFactor:1e4,filterPeriod:10,decayPeriod:120,reductionFactor:5e3,variableFeeControl:2e6,maxVolatilityAccumulator:1e5,protocolShare:2e3,space:[0,0]}},{binStep:2,feeParameters:{baseFactor:1e4,filterPeriod:10,decayPeriod:120,reductionFactor:5e3,variableFeeControl:5e5,maxVolatilityAccumulator:25e4,protocolShare:2e3,space:[0,0]}},{binStep:5,feeParameters:{baseFactor:1e4,filterPeriod:30,decayPeriod:600,reductionFactor:5e3,variableFeeControl:12e4,maxVolatilityAccumulator:3e5,protocolShare:2e3,space:[0,0]}},{binStep:10,feeParameters:{baseFactor:1e4,filterPeriod:30,decayPeriod:600,reductionFactor:5e3,variableFeeControl:4e4,maxVolatilityAccumulator:35e4,protocolShare:2e3,space:[0,0]}},{binStep:20,feeParameters:{baseFactor:1e4,filterPeriod:30,decayPeriod:600,reductionFactor:5e3,variableFeeControl:2e4,maxVolatilityAccumulator:35e4,protocolShare:2e3,space:[0,0]}},{binStep:50,feeParameters:{baseFactor:1e4,filterPeriod:120,decayPeriod:1200,reductionFactor:5e3,variableFeeControl:1e4,maxVolatilityAccumulator:25e4,protocolShare:2e3,space:[0,0]}},{binStep:100,feeParameters:{baseFactor:1e4,filterPeriod:300,decayPeriod:1200,reductionFactor:5e3,variableFeeControl:7500,maxVolatilityAccumulator:15e4,protocolShare:2e3,space:[0,0]}},{binStep:200,feeParameters:{baseFactor:1e4,filterPeriod:300,decayPeriod:1200,reductionFactor:5e3,variableFeeControl:7500,maxVolatilityAccumulator:15e4,protocolShare:2e3,space:[0,0]}},{binStep:250,feeParameters:{baseFactor:2e4,filterPeriod:300,decayPeriod:1200,reductionFactor:5e3,variableFeeControl:7500,maxVolatilityAccumulator:15e4,protocolShare:2e3,space:[0,0]}}],exports.CCU_LIMIT=4e5,exports.CONFIG=S,exports.DECAY_PERIOD=600,exports.FILTER_PERIOD=30,exports.FIXED_LENGTH=16,exports.LiquidityBookServices=U,exports.MAX_BASIS_POINTS=1e4,exports.MAX_VOLATILITY_ACCUMULATOR=35e4,exports.ONE=1,exports.PRECISION=1e9,exports.PROTOCOL_SHARE=2e3,exports.REDUCTION_FACTOR=5e3,exports.REWARDS_DURATION=86400,exports.REWARDS_PER_SECOND=x,exports.SCALE_OFFSET=64,exports.START_TIME=1e3,exports.UNIT_PRICE_DEFAULT=1e6,exports.VARIABLE_FEE_CONTROL=4e4,exports.VARIABLE_FEE_PRECISION=1e11,exports.WRAP_SOL_ADDRESS=M,exports.createUniformDistribution=function(e){var t=e.shape,n=e.binRange,r=n[0],a=n[1];if(r>a)throw new Error("Invalid binRange: minBin must be <= maxBin");var i=Array.from({length:a-r+1},(function(e,t){return t+r}));if(t===exports.LiquidityShape.Spot){var o=a-r+1,s=i.findIndex((function(e){return 0===e}));if(-1===s){var u=r>0,c=a<0,p=1e4/o;return i.map((function(e){return{relativeBinId:e,distributionX:u?p:0,distributionY:c?p:0}}))}var m=Math.abs(r),d=a,l=Array.from({length:o},(function(e,t){if(t<s)return 0;var n=Math.floor(2e4/(2*d+1));return t===s?1e4-n*d:n})),y=Array.from({length:o},(function(e,t){if(t>s)return 0;var n=Math.floor(2e4/(2*m+1));return t===s?1e4-n*m:n}));return i.map((function(e,t){return{relativeBinId:e,distributionX:l[t],distributionY:y[t]}}))}if(t===exports.LiquidityShape.Curve)return function(e){var t=[],n=[],r=[],a=function(e){return e/(e>=20?2:e>=15?1.8:e>=10?1.7:e>=8?1.6:e>=6?1.5:e>=5?1.4:1)};if(e[1]<0){var i=e[1]-e[0]+1,o=Array.from(Array(0-e[0]).keys()).reverse().slice(0,i).map((function(e){return-1*(e+1)}));t=[].concat(o),0===e[1]&&t.push(0),n=[].concat(Array(t.length).fill(0));var s=t.length-1,u=a(s),c=1/(Math.sqrt(2*Math.PI)*u);r=t.map((function(e,t){return 2*c*Math.exp(-.5*Math.pow((s-t)/u,2))}))}else if(0<e[0]){var p=e[1]-e[0]+1,m=Array.from(Array(e[1]-0).keys()).reverse().slice(0,p).reverse().map((function(e){return e+1}));t=[].concat(m),0===e[0]&&t.unshift(0),r=[].concat(Array(t.length).fill(0));var d=a(t.length-1),l=1/(Math.sqrt(2*Math.PI)*d);n=t.map((function(e,t){return 2*l*Math.exp(-.5*Math.pow(t/d,2))}))}else{var y=0-e[0],_=e[1]-0,f=Array.from(Array(y).keys()).reverse().map((function(e){return-1*(e+1)})),b=Array.from(Array(_).keys()).map((function(e){return e+1}));t=[].concat(f,[0],b);var h=b.length,k=a(h),g=0===h?1:1/(Math.sqrt(2*Math.PI)*k);n=[].concat(Array(y).fill(0),[g],b.map((function(e,t){return 2*g*Math.exp(-.5*Math.pow((t+1)/k,2))})));var v=f.length,w=a(v),P=0===v?1:1/(Math.sqrt(2*Math.PI)*w);r=[].concat(f.map((function(e,t){return 2*P*Math.exp(-.5*Math.pow((v-t)/w,2))})),[P],Array(_).fill(0))}var A=n.map((function(e){return Math.floor(1e4*e)})),B=r.map((function(e){return Math.floor(1e4*e)})),I=A.reduce((function(e,t){return e+t}),0),S=B.reduce((function(e,t){return e+t}),0);if(I>0&&1e4!==I){var x=I>1e4,M=Math.abs(I-1e4),E=A.filter((function(e){return e>0})).length,F=D(M,E),q=F[0],T=F[1];A=A.map((function(e){return 0===e?e:x?e-Math.floor(q):e+Math.floor(q)}));var O=T;if(T>0)if(x){var C=A.reverse().map((function(e){return 0===e?e:O>0?(O--,e-1):e}));A=C.reverse()}else A=A.map((function(e){return 0===e?e:O>0?(O--,e+1):e}))}if(S>0&&1e4!==S){var N=S>1e4,L=Math.abs(S-1e4),R=B.filter((function(e){return e>0})).length,V=D(L,R),X=V[0],Y=V[1];B=B.map((function(e,t){return 0===e?e:Y>0&&t===R-1?N?e-Math.floor(X)-Y:e+Math.floor(X)+Y:N?e-Math.floor(X):e+Math.floor(X)}))}return t.map((function(e,t){return{relativeBinId:e,distributionX:A[t],distributionY:B[t]}}))}(n);if(t===exports.LiquidityShape.BidAsk){var _=[],f=[],b=[];if(a<0){var h=a-r+1,k=Array.from(Array(0-r).keys()).reverse().slice(0,h).map((function(e){return-1*(e+1)}));b=[].concat(k),f=[].concat(Array(b.length).fill(0));var g=Math.pow(b[0],2);_=b.map((function(e){return-2*(e-1)/g}))}else if(0<r){var v=n[1]-n[0]+1,w=Array.from(Array(n[1]-0).keys()).reverse().slice(0,v).reverse().map((function(e){return e+1}));b=[].concat(w);var P=Math.pow(b[b.length-1],2);f=b.map((function(e){return 2*(e+1)/P})),_=[].concat(Array(b.length).fill(0))}else{var A=0-n[0],B=n[1]-0,I=Array.from(Array(A).keys()).reverse().map((function(e){return-1*(e+1)})),S=Array.from(Array(B).keys()).map((function(e){return e+1}));b=[].concat(I,[0],S);var x=0===S.length?1:1===S.length&&1===S[0]?3:Math.pow(S[S.length-1],2);f=[].concat(Array(A).fill(0),[1/x],S.map((function(e){return(e+1)/x})));var M=0===I.length?1:-1===I[0]?3:Math.pow(I[0],2);_=[].concat(I.map((function(e){return-1*(e-1)/M})),[1/M],Array(B).fill(0))}var E=f.map((function(e){return Math.floor(1e4*e)})),F=_.map((function(e){return Math.floor(1e4*e)})),q=E.reduce((function(e,t){return e+t}),0),T=F.reduce((function(e,t){return e+t}),0);if(q>0&&1e4!==q){var O=q>1e4,C=Math.abs(q-1e4),N=E.filter((function(e){return e>0})).length,L=D(C,N),R=L[0],V=L[1];E=E.map((function(e){return 0===e?e:O?e-Math.floor(R):e+Math.floor(R)}));var X=V;if(V>0)if(O){var Y=E.reverse().map((function(e){return 0===e?e:X>0?(X--,e-1):e}));E=Y.reverse()}else E=E.map((function(e){return 0===e?e:X>0?(X--,e+1):e}))}if(T>0&&1e4!==T){var K=T>1e4,U=Math.abs(T-1e4),W=F.filter((function(e){return e>0})).length,z=D(U,W),H=z[0],j=z[1];F=F.map((function(e,t){return 0===e?e:j>0&&0===t?K?e-Math.floor(H)-j:e+Math.floor(H)+j:K?e-Math.floor(H):e+Math.floor(H)}))}return b.map((function(e,t){return{relativeBinId:e,distributionX:E[t],distributionY:F[t]}}))}throw new Error("Unsupported liquidity shape: "+t)},exports.findPosition=function(e,t){return void 0===t&&(t=8388608),function(n){var r=Y(e,t);return n.lowerBinId<=r.binLower&&n.upperBinId>=r.binUpper}},exports.getBinRange=Y,exports.getGasPrice=K,exports.getMaxBinArray=function(e,t){var n=[t+e[0],t+e[1]],r=[Math.floor(n[0]/256),Math.floor(n[1]/256)];return r[1]===r[0]&&(r[1]+=1),Array.from({length:r[1]-r[0]-1+1},(function(e,t){var n=r[0]+2*t;return{binArrayLowerIndex:n,binArrayUpperIndex:n+1}}))},exports.getMaxPosition=function(e,t){var n=Math.floor(t/16),r=[Math.floor((t+e[0])/16),Math.floor((t+e[1])/16)];return Array.from({length:r[1]-r[0]+1},(function(e,t){return r[0]+t-n}))};
//# sourceMappingURL=dlmm-sdk.cjs.production.min.js.map
